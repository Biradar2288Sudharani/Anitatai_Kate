<!-- 

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>3D Infinite Carousel + Swipe Momentum</title>

<style>
:root{
  --gap:18px;
  --card-radius:14px;
  --muted:#94a3b8;
  --accent:#7c3aed;
}
body{
  margin:0;
  background:#c5ccda;
  font-family:Poppins,sans-serif;
  color:#fff;
  display:flex;
  justify-content:center;
  padding:40px;
}
.wrap{
    width:95%;
    max-width:1200px
}

/* Speed UI */
.speed-control{
  margin-bottom:12px;
  display:flex;
  justify-content:end;
  gap:8px;
  align-items:center;
}
.speed-control select{
  background:#8a9ebf;
  color:white;
  border:none;
  padding:4px 8px;
  border-radius:6px;
}

/* Carousel */
.carousel{
  position:relative;
  overflow:hidden;
  border-radius:12px;
  background:#84aaf1;
  padding:14px;
  perspective:1200px;
}
.carousel__track{
  display:flex;
  gap:var(--gap);
  will-change:transform;
  transform-style:preserve-3d;
  transition:transform 0.6s cubic-bezier(.22,.61,.36,1);
  height: 28rem;
}
.card{
  flex:0 0 calc((100%/3) - 12px);
  background:#798eb5;
  border-radius:var(--card-radius);
  overflow:hidden;
  transition:0.4s;
  transform:scale(0.88) rotateY(12deg);
  opacity:0.7;
}
.card.center{
  transform:scale(1) rotateY(0deg) translateZ(30px);
  opacity:1;
  box-shadow:0 20px 35px rgba(0,0,0,0.4);
}
.card img{
    width:100%;
    height:250px;
    object-fit:cover
}
.card__content{
    padding:12px
}
.card__title{
    font-size:16px;
    margin:6px 0
}
.card__desc{
    font-size:13px;
    color:var(--muted)
}

.controls button{
  position:absolute;top:50%;transform:translateY(-50%);
  background:#1e2d47;border:none;color:#fff;
  width:42px;height:42px;border-radius:50%;cursor:pointer;
  font-size:18px;z-index:10;
}
#prev{left:8px} #next{right:8px}

.dots{display:flex;justify-content:center;margin-top:12px;gap:8px}
.dot{width:10px;height:10px;border-radius:50%;background:#22344f;cursor:pointer;transition:.3s}
.dot.active{width:28px;border-radius:10px;background:var(--accent)}
</style>
</head>

<body>
<div class="wrap">

<div class="speed-control">
  <span>Speed:</span>
  <select id="speed">
    <option value="1000">1s</option>
    <option value="2000">2s</option>
    <option selected value="3000">3s</option>
    <option value="5000">5s</option>
    <option value="7000">7s</option>
  </select>
</div>

<section class="carousel">
  <div class="carousel__track" id="track"></div>
  <div class="controls">
    <button id="prev">❮</button>
    <button id="next">❯</button>
  </div>
</section>

<div class="dots" id="dots"></div>

</div>

<script>
const imgList = ["1","2","3","4","5","6","7","8"].map(i=>`https://picsum.photos/seed/${i}/600/400`);

const track = document.getElementById("track");
const dots = document.getElementById("dots");
const prev = document.getElementById("prev");
const next = document.getElementById("next");
const speed = document.getElementById("speed");

let index = 1;
let autoplayTime = 3000;
let timer;

// Prepare infinite items
const items = [imgList.at(-1), ...imgList, imgList[0]];
track.innerHTML = items.map((img,i)=>
`<div class="card">
  <img src="${img}">
  <div class="card__content">
    <h3 class="card__title">Card ${i}</h3>
    <p class="card__desc">3D + Swipe momentum</p>
  </div>
</div>`).join("");

const cards = ()=>[...track.children];

const updateView = (jump=false)=>{
  if(jump) track.style.transition="none";
  else track.style.transition="transform 0.6s cubic-bezier(.22,.61,.36,1)";

  track.style.transform=`translateX(calc(${-index * (100/3)}% - ${index*6}px))`;

  cards().forEach((c,i)=>{
      c.classList.toggle("center", i===index);
  });

  const real = (index-1+imgList.length)%imgList.length;
  [...dots.children].forEach((d,i)=>d.classList.toggle("active", i===real));
};

dots.innerHTML = imgList.map((_,i)=>`<div class="dot" onclick="go(${i})"></div>`).join("");
window.go = i=>{ index=i+1; updateView(); reset() };

next.onclick = ()=>{
  index++;
  updateView();
  if(index === imgList.length+1) setTimeout(()=>{ index=1; updateView(true); },600);
  reset();
};

prev.onclick = ()=>{
  index--;
  updateView();
  if(index===0) setTimeout(()=>{ index=imgList.length; updateView(true); },600);
  reset();
};

// AUTOPLAY
const start = ()=>{ stop(); timer=setInterval(()=>next.click(), autoplayTime) };
const stop = ()=> clearInterval(timer);
const reset = ()=>{ stop(); start(); };
speed.onchange=e=>{ autoplayTime=+e.target.value; reset(); };

// HOVER PAUSE
document.querySelector(".carousel").onmouseenter=stop;
document.querySelector(".carousel").onmouseleave=start;

/* ========== Swipe Momentum ========== */
let startX=0, currentX=0, isDown=false, velocity=0, lastMove=Date.now();
track.addEventListener("mousedown",e=>{
  isDown=true; startX=e.pageX; velocity=0; track.style.transition="none";
});
track.addEventListener("mousemove",e=>{
  if(!isDown) return;
  let now=Date.now();
  let dx=e.pageX - currentX;
  velocity=dx/(now-lastMove+1);
  currentX=e.pageX;
  lastMove=now;
  track.style.transform=`translateX(calc(${-index*(100/3)}% - ${index*6}px + ${currentX-startX}px))`;
});
window.addEventListener("mouseup",()=>{
  if(!isDown) return;
  isDown=false;
  if(velocity < -0.25) next.click();
  else if(velocity > 0.25) prev.click();
  else updateView();
});

// Touch
track.addEventListener("touchstart",e=>{
  isDown=true; startX=e.touches[0].pageX; currentX=startX; velocity=0;
  track.style.transition="none";
});
track.addEventListener("touchmove",e=>{
  if(!isDown) return;
  let now=Date.now();
  let dx=e.touches[0].pageX - currentX;
  velocity=dx/(now-lastMove+1);
  currentX=e.touches[0].pageX;
  lastMove=now;
  track.style.transform=`translateX(calc(${-index*(100/3)}% - ${index*6}px + ${currentX-startX}px))`;
});
track.addEventListener("touchend",()=>{
  isDown=false;
  if(velocity < -0.25) next.click();
  else if(velocity > 0.25) prev.click();
  else updateView();
});

/* INIT */
updateView(true);
start();
</script>

</body>
</html> -->


<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>

body{
  font-family: Poppins, sans-serif;
  background:#e8eefa;
  display:flex;
  justify-content:center;
  padding:20px;
}

.carousel{
  width:90%;
  max-width:800px;
  position:relative;
  overflow:hidden;
  border-radius:12px;
  background:#fff;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
}

.slides{
  display:flex;
  transition:0.5s;
}

.card{
  min-width:100%;
  padding:20px;
  box-sizing:border-box;
  text-align:center;
}

.card img{
  width:100%;
  height:250px;
  object-fit:cover;
  border-radius:10px;
}

button{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  background:#222;
  color:#fff;
  border:none;
  padding:10px 16px;
  cursor:pointer;
  border-radius:50%;
  font-size:18px;
}

#prev{ left:10px }
#next{ right:10px }

.dots{
  text-align:center;
  margin:10px;
}

.dot{
  height:10px;
  width:10px;
  background:#bbb;
  display:inline-block;
  margin:5px;
  border-radius:50%;
  cursor:pointer;
}

.active{
  background:#333;
  width:20px;
  border-radius:5px;
}

</style>
</head>
<body>

<div class="carousel">
  <div class="slides" id="slides">

    <div class="card">
      <img src="https://picsum.photos/800/400?1">
      <h3>Card 1</h3>
      <p>Your description here...</p>
    </div>

    <div class="card">
      <img src="https://picsum.photos/800/400?2">
      <h3>Card 2</h3>
      <p>Your description here...</p>
    </div>

    <div class="card">
      <img src="https://picsum.photos/800/400?3">
      <h3>Card 3</h3>
      <p>Your description here...</p>
    </div>

    <div class="card">
      <img src="https://picsum.photos/800/400?1">
      <h3>Card 1</h3>
      <p>Your description here...</p>
    </div>

    <div class="card">
      <img src="https://picsum.photos/800/400?2">
      <h3>Card 2</h3>
      <p>Your description here...</p>
    </div>

    <div class="card">
      <img src="https://picsum.photos/800/400?3">
      <h3>Card 3</h3>
      <p>Your description here...</p>
    </div>

    <div class="card">
      <img src="https://picsum.photos/800/400?1">
      <h3>Card 1</h3>
      <p>Your description here...</p>
    </div>

    <div class="card">
      <img src="https://picsum.photos/800/400?2">
      <h3>Card 2</h3>
      <p>Your description here...</p>
    </div>

    <div class="card">
      <img src="https://picsum.photos/800/400?3">
      <h3>Card 3</h3>
      <p>Your description here...</p>
    </div>

  </div>

  <button id="prev">❮</button>
  <button id="next">❯</button>
</div>

<div class="dots" id="dots"></div>

<script>
const slides = document.getElementById("slides");
const total = slides.children.length;
let index = 0;

const dots = document.getElementById("dots");
for(let i=0;i<total;i++){
  dots.innerHTML += `<span class="dot" onclick="go(${i})"></span>`;
}
const allDots = document.querySelectorAll(".dot");

function update(){
  slides.style.transform = `translateX(-${index * 100}%)`;
  allDots.forEach((d,i)=> d.classList.toggle("active", i===index));
}

document.getElementById("next").onclick = ()=>{ index = (index+1)%total; update() };
document.getElementById("prev").onclick = ()=>{ index = (index-1+total)%total; update() };
window.go = (i)=>{ index = i; update() };

setInterval(()=>{ index = (index+1)%total; update() }, 3000);
update();
</script>

</body>
</html>
